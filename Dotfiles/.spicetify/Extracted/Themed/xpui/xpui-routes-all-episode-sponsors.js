"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[59,396],{87581:(e,t,n)=>{n.d(t,{Q:()=>d});var r=n(67154),o=n.n(r),s=n(67294),i=n.n(s);const a="_pMNGOs2KBLWGpGmunYI";var c=n(94184),p=n.n(c);function d(e){return i().createElement("section",o()({},e,{className:p()(a,e.className)}))}},14784:(e,t,n)=>{n.r(t),n.d(t,{ALL_EPISODE_SPONSORS_TESTID:()=>O,AllEpisodeSponsors:()=>b,allEpisodeSponsorsPath:()=>f.e,default:()=>E});var r=n(67154),o=n.n(r),s=n(28975),i=n(67294),a=n.n(i),c=n(61202),p=n(88396),d=n(77186);var u=n(99922),l=n(87581),f=n(61737);const O="all-episode-sponsors";function b({EpisodeSponsorsWrapper:e=p.EpisodeSponsorsWrapper}){const{[s.hd]:t}=(0,c.UO)(),n=(0,d.P)(),r=(0,u.o)();return n.location.state?a().createElement(l.Q,{"data-testid":O},a().createElement(e,o()({},r,{numberOfSponsorsToDisplay:1/0,reason:"Episode page See All"}))):a().createElement(c.l_,{to:(0,s.lc)(t)})}const E=b},88396:(e,t,n)=>{n.r(t),n.d(t,{EPISODE_SPONSORS_SHELF_TESTID:()=>P,EpisodeSponsorsWrapper:()=>h,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>g,default:()=>w});var r=n(67154),o=n.n(r),s=n(59713),i=n.n(s),a=n(67294),c=n.n(a),p=n(69518),d=n.n(p);var u=n(18693);const l=(0,a.lazy)((()=>Promise.all([n.e(814),n.e(258)]).then(n.bind(n,87258))));function f({fetchedEpisodeSponsorsData:e,fireTrackingEvent:t,numberOfSponsorsToDisplay:r,firedViewedEvents:s,version:i,reason:p,uri:d}){const{displayedEpisodeSponsorsData:u}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:t}){return(0,a.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,t)})),[e,t])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:r}),f=(0,a.useMemo)((()=>u.map(((e,r)=>c().createElement(l,o()({key:`${e.metadata.lineitem_id}-${r}`,fireTrackingEvent:t,firedViewedEvents:s,version:i,onClick:async function(){const[{getEventSenderInstance:e},{createPodcastAdCtaCardEvent:t}]=await Promise.all([Promise.resolve().then(n.bind(n,24872)),n.e(814).then(n.bind(n,1486))]);return e().send(t({uri:d,reason:p,lineitem_id:u.map((e=>e.metadata.lineitemId)),ui_navigate:u.map((({clickthrough:e},t)=>r===t?e:"")),navigate_to_external_uri:u.map(((e,t)=>r===t))}))}},e))))),[u,t,s,i,p,d]);return{displayedEpisodeSponsorsData:u,displayedSponsors:f}}function O({firedViewedEvents:e}){var t;const n=(0,a.useRef)();return{firedViewedEvents:n.current=null!==(t=null!=e?e:n.current)&&void 0!==t?t:new Set}}var b=n(61202);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S({uri:e,getEpisodeSponsors:t,fireTrackingEvent:n,numberOfSponsorsToDisplay:r,version:o,reason:s}){const{state:i}=(0,b.TH)(),{episodeBase62Id:c}=function({uri:e,episodeBase62Id:t}){return{episodeBase62Id:(0,a.useMemo)((()=>{var n;return t||(null===(n=d().from(e))||void 0===n?void 0:n.getBase62Id())}),[e,t])}}(v(v({},i),{},{uri:e})),{fetchedEpisodeSponsorsData:p}=(0,u.m)(v(v({},i),{},{episodeBase62Id:c,getEpisodeSponsors:t,version:o})),{firedViewedEvents:l}=O(v({},i));return v(v({uri:e,episodeBase62Id:c,fetchedEpisodeSponsorsData:p},f({fetchedEpisodeSponsorsData:p,fireTrackingEvent:n,numberOfSponsorsToDisplay:r,firedViewedEvents:l,version:o,reason:s,uri:e})),{},{firedViewedEvents:l,reason:s})}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const D=(0,a.lazy)((()=>n.e(479).then(n.bind(n,27479)))),P="episode-sponsors-shelf",g="see-all-episode-sponsors";function h(e){const{numberOfSponsorsToDisplay:t}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),n=S(m(m({},e),{},{numberOfSponsorsToDisplay:t}));return n.episodeBase62Id&&n.displayedSponsors.length?c().createElement(a.Suspense,{fallback:!0},c().createElement(D,o()({},e,{numberOfSponsorsToDisplay:t,state:n}))):null}const w=h},18693:(e,t,n)=>{n.d(t,{F:()=>i,m:()=>a});var r=n(67294),o=n(64005),s=n(31604);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:t,fetchedEpisodeSponsorsData:a=[],version:c}){const[p,d]=(0,r.useState)(a),u=(0,r.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const r=null!=t?t:(await Promise.resolve().then(n.bind(n,11401))).getEpisodeSponsors;d(await r(e,{version:c}))}catch(e){d([])}}),[e,t,c]),l=(0,o.y)(u,i);return(0,r.useEffect)((function(){a.length||l()}),[l,a.length]),(0,s.H)(l),{fetchedEpisodeSponsorsData:p}}},99922:(e,t,n)=>{n.d(t,{o:()=>s});var r=n(17231),o=n(44503);function s(){return{version:(0,r.W6)(o.GE)?2:1}}},31604:(e,t,n)=>{n.d(t,{H:()=>p});var r=n(17231),o=n(67294),s=n(40080),i=n(8341),a=n(99995);var c=n(44503);function p(e){const t=(0,r.W6)(c.oF),n=(0,i.Y)((e=>{var t,n;const r=null!==(t=null==e?void 0:e.item)&&void 0!==t?t:void 0;return(0,a.k6)(r)&&r.isPodcastAd&&null!==(n=r.id)&&void 0!==n?n:void 0})),p=(0,s.D)(n);(0,o.useEffect)((function(){n!==p&&Boolean(n)&&setTimeout(e,t)}),[e,n,p,t])}},77186:(e,t,n)=>{n.d(t,{P:()=>p});var r=n(59713),o=n.n(r),s=n(67294),i=n(61202);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(){const e=(0,i.k6)(),{listen:t,location:n}=e;return(0,s.useEffect)((function(){return t(((e,t)=>{"POP"===t&&(e.state=c(c(c({},void 0),n.state),e.state))}))})),e}},40080:(e,t,n)=>{n.d(t,{D:()=>o});var r=n(67294);function o(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}}}]);
//# sourceMappingURL=xpui-routes-all-episode-sponsors.js.map