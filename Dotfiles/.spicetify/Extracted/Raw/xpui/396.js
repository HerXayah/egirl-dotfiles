"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[396],{88396:(e,n,r)=>{r.r(n),r.d(n,{EPISODE_SPONSORS_SHELF_TESTID:()=>h,EpisodeSponsorsWrapper:()=>w,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>g,default:()=>P});var o=r(67154),t=r.n(o),s=r(59713),i=r.n(s),a=r(67294),p=r.n(a),c=r(69518),d=r.n(c);var u=r(18693);const l=(0,a.lazy)((()=>Promise.all([r.e(814),r.e(258)]).then(r.bind(r,87258))));function f({fetchedEpisodeSponsorsData:e,fireTrackingEvent:n,numberOfSponsorsToDisplay:o,firedViewedEvents:s,version:i,reason:c,uri:d}){const{displayedEpisodeSponsorsData:u}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:n}){return(0,a.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,n)})),[e,n])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:o}),f=(0,a.useMemo)((()=>u.map(((e,o)=>p().createElement(l,t()({key:`${e.metadata.lineitem_id}-${o}`,fireTrackingEvent:n,firedViewedEvents:s,version:i,onClick:async function(){const[{getEventSenderInstance:e},{createPodcastAdCtaCardEvent:n}]=await Promise.all([Promise.resolve().then(r.bind(r,24872)),r.e(814).then(r.bind(r,1486))]);return e().send(n({uri:d,reason:c,lineitem_id:u.map((e=>e.metadata.lineitemId)),ui_navigate:u.map((({clickthrough:e},n)=>o===n?e:"")),navigate_to_external_uri:u.map(((e,n)=>o===n))}))}},e))))),[u,n,s,i,c,d]);return{displayedEpisodeSponsorsData:u,displayedSponsors:f}}function b({firedViewedEvents:e}){var n;const r=(0,a.useRef)();return{firedViewedEvents:r.current=null!==(n=null!=e?e:r.current)&&void 0!==n?n:new Set}}var O=r(61202);function v(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function E(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?v(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function S({uri:e,getEpisodeSponsors:n,fireTrackingEvent:r,numberOfSponsorsToDisplay:o,version:t,reason:s}){const{state:i}=(0,O.TH)(),{episodeBase62Id:p}=function({uri:e,episodeBase62Id:n}){return{episodeBase62Id:(0,a.useMemo)((()=>{var r;return n||(null===(r=d().from(e))||void 0===r?void 0:r.getBase62Id())}),[e,n])}}(E(E({},i),{},{uri:e})),{fetchedEpisodeSponsorsData:c}=(0,u.m)(E(E({},i),{},{episodeBase62Id:p,getEpisodeSponsors:n,version:t})),{firedViewedEvents:l}=b(E({},i));return E(E({uri:e,episodeBase62Id:p,fetchedEpisodeSponsorsData:c},f({fetchedEpisodeSponsorsData:c,fireTrackingEvent:r,numberOfSponsorsToDisplay:o,firedViewedEvents:l,version:t,reason:s,uri:e})),{},{firedViewedEvents:l,reason:s})}function y(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function m(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?y(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}const D=(0,a.lazy)((()=>r.e(479).then(r.bind(r,27479)))),h="episode-sponsors-shelf",g="see-all-episode-sponsors";function w(e){const{numberOfSponsorsToDisplay:n}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),r=S(m(m({},e),{},{numberOfSponsorsToDisplay:n}));return r.episodeBase62Id&&r.displayedSponsors.length?p().createElement(a.Suspense,{fallback:!0},p().createElement(D,t()({},e,{numberOfSponsorsToDisplay:n,state:r}))):null}const P=w},18693:(e,n,r)=>{r.d(n,{F:()=>i,m:()=>a});var o=r(67294),t=r(64005),s=r(31604);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:n,fetchedEpisodeSponsorsData:a=[],version:p}){const[c,d]=(0,o.useState)(a),u=(0,o.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const o=null!=n?n:(await Promise.resolve().then(r.bind(r,11401))).getEpisodeSponsors;d(await o(e,{version:p}))}catch(e){d([])}}),[e,n,p]),l=(0,t.y)(u,i);return(0,o.useEffect)((function(){a.length||l()}),[l,a.length]),(0,s.H)(l),{fetchedEpisodeSponsorsData:c}}},31604:(e,n,r)=>{r.d(n,{H:()=>c});var o=r(17231),t=r(67294),s=r(40080),i=r(8341),a=r(99995);var p=r(44503);function c(e){const n=(0,o.W6)(p.oF),r=(0,i.Y)((e=>{var n,r;const o=null!==(n=null==e?void 0:e.item)&&void 0!==n?n:void 0;return(0,a.k6)(o)&&o.isPodcastAd&&null!==(r=o.id)&&void 0!==r?r:void 0})),c=(0,s.D)(r);(0,t.useEffect)((function(){r!==c&&Boolean(r)&&setTimeout(e,n)}),[e,r,c,n])}}}]);
//# sourceMappingURL=396.js.map